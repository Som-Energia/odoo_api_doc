{
  "openapi": "3.0.0",
  "info": {
    "title": "City Management API",
    "description": "API for retrieving city information by INE code in Odoo.\n\n## Authentication\nAll endpoints require API key authentication via the `X-API-Key` header.\n\n## Response Format\nAll responses follow a standard format with `success`, `message`, and optionally `data` or `error_code` fields.\n\n## Error Codes\n- `INVALID_API_KEY`: Authentication failed\n- `RECORD_NOT_FOUND`: Resource not found (404 status)\n- `INTERNAL_SERVER_ERROR`: Unexpected error (500 status)\n",
    "version": "1.0.0",
    "contact": {
      "name": "Punt Sistemes"
    }
  },
  "servers": [
    {
      "url": "{protocol}://{host}:{port}{basePath}",
      "description": "Personalized Server Configuration",
      "variables": {
        "protocol": {
          "enum": [
            "http",
            "https"
          ],
          "default": "http",
          "description": "Protocol (http or https)"
        },
        "host": {
          "default": "localhost",
          "description": "Server hostname or IP address"
        },
        "port": {
          "default": "8069",
          "description": "Server port number"
        },
        "basePath": {
          "default": "/api/v1",
          "description": "API base path"
        }
      }
    }
  ],
  "security": [
    {
      "ApiKeyAuth": []
    }
  ],
  "components": {
    "securitySchemes": {
      "ApiKeyAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "X-API-Key",
        "description": "API key for authentication"
      }
    }
  },
  "paths": {
    "/city/{code_ine}": {
      "get": {
        "summary": "Get City",
        "description": "Retrieve a specific city by its INE code.\n\nThe endpoint searches for a case-insensitive match of the sanitized INE code.\nReturns 404 if no matching record exists.\n",
        "operationId": "get_city",
        "tags": [
          "Cities"
        ],
        "parameters": [
          {
            "name": "code_ine",
            "in": "path",
            "required": true,
            "description": "The INE code of the city to search for (will be sanitized)",
            "schema": {
              "type": "string",
              "example": "28001"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "City found successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Record found successfully",
                  "data": {
                    "odoo_id": 1,
                    "erp_id": 10001,
                    "name": "Madrid"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid, missing, or expired API key",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error_code": "INVALID_API_KEY",
                  "message": "Invalid or missing API key"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The city with this INE code does not exist",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error_code": "RECORD_NOT_FOUND",
                  "message": "Record not found: 28001"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error_code": "INTERNAL_SERVER_ERROR",
                  "message": "An internal server error occurred"
                }
              }
            }
          }
        }
      }
    }
  }
}
