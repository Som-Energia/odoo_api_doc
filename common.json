{
  "openapi": "3.0.0",
  "info": {
    "title": "Common Entity Management API",
    "description": "API for retrieving Odoo records by ERP ID across multiple entity types\nand updating ERP IDs for existing records.\n\n## Authentication\nAll endpoints require API key authentication via the `X-API-Key` header.\n\n## Response Format\nAll responses follow a standard format with `success`, `message`, and optionally `data` or `error_code` fields.\n\n## Allowed Entities\n- `country`: res.country\n- `state`: res.country.state\n- `city`: res.city\n- `bank`: res.bank\n\n## Error Codes\n- `INVALID_API_KEY`: Authentication failed\n- `INVALID_ENTITY`: Invalid entity type (400 status)\n- `RECORD_NOT_FOUND`: Resource not found (404 status)\n- `DUPLICATE_ERP_ID`: ERP ID already exists (409 status)\n- `INTERNAL_SERVER_ERROR`: Unexpected error (500 status)\n",
    "version": "1.0.0",
    "contact": {
      "name": "Punt Sistemes"
    }
  },
  "servers": [
    {
      "url": "{protocol}://{host}:{port}{basePath}",
      "description": "Personalized Server Configuration",
      "variables": {
        "protocol": {
          "enum": [
            "http",
            "https"
          ],
          "default": "http",
          "description": "Protocol (http or https)"
        },
        "host": {
          "default": "localhost",
          "description": "Server hostname or IP address"
        },
        "port": {
          "default": "8069",
          "description": "Server port number"
        },
        "basePath": {
          "default": "/api/v1",
          "description": "API base path"
        }
      }
    }
  ],
  "security": [
    {
      "ApiKeyAuth": [ ]
    }
  ],
  "components": {
    "securitySchemes": {
      "ApiKeyAuth": {
        "type": "apiKey",
        "in": "header",
        "name": "X-API-Key",
        "description": "API key for authentication"
      }
    }
  },
  "paths": {
    "/entities": {
      "get": {
        "summary": "Get Entity List",
        "description": "Retrieve the list of allowed entity types and their corresponding Odoo models.\n",
        "operationId": "get_list_models",
        "tags": [
          "Entities"
        ],
        "responses": {
          "200": {
            "description": "Entity list retrieved successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Entities retrieved successfully",
                  "data": {
                    "country": "res.country",
                    "state": "res.country.state",
                    "city": "res.city",
                    "bank": "res.bank"
                  }
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid, missing, or expired API key",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error_code": "INVALID_API_KEY",
                  "message": "Invalid or missing API key"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error_code": "INTERNAL_SERVER_ERROR",
                  "message": "An internal server error occurred"
                }
              }
            }
          }
        }
      }
    },
    "/entity/{entity}/{erp_id}": {
      "get": {
        "summary": "Get Record by ERP ID",
        "description": "Retrieve the Odoo ID for a given entity type and ERP ID.\n\nReturns 404 if no matching record exists.\n",
        "operationId": "get_record_info",
        "tags": [
          "Entities"
        ],
        "parameters": [
          {
            "name": "entity",
            "in": "path",
            "required": true,
            "description": "The entity type (country, state, city, or bank)",
            "schema": {
              "type": "string",
              "enum": [
                "country",
                "state",
                "city",
                "bank"
              ],
              "example": "country"
            }
          },
          {
            "name": "erp_id",
            "in": "path",
            "required": true,
            "description": "The ERP ID to search for",
            "schema": {
              "type": "integer",
              "example": 10001
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Record found successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "Record found successfully",
                  "data": {
                    "odoo_id": 68,
                    "erp_id": 10001,
                    "model": "res.country"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid entity type",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error_code": "INVALID_ENTITY",
                  "message": "Invalid entity type: invalid_entity"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid, missing, or expired API key",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error_code": "INVALID_API_KEY",
                  "message": "Invalid or missing API key"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The record with this ERP ID does not exist",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error_code": "RECORD_NOT_FOUND",
                  "message": "Record not found: 10001"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error_code": "INTERNAL_SERVER_ERROR",
                  "message": "An internal server error occurred"
                }
              }
            }
          }
        }
      }
    },
    "/entity/{entity}/{odoo_id}/{erp_id}": {
      "post": {
        "summary": "Set ERP ID",
        "description": "Set the ERP ID for a given Odoo record.\n\nReturns 409 if the ERP ID already exists for another record.\n",
        "operationId": "set_erp_id",
        "tags": [
          "Entities"
        ],
        "parameters": [
          {
            "name": "entity",
            "in": "path",
            "required": true,
            "description": "The entity type (country, state, city, or bank)",
            "schema": {
              "type": "string",
              "enum": [
                "country",
                "state",
                "city",
                "bank"
              ],
              "example": "country"
            }
          },
          {
            "name": "odoo_id",
            "in": "path",
            "required": true,
            "description": "The Odoo ID of the record to update",
            "schema": {
              "type": "integer",
              "example": 68
            }
          },
          {
            "name": "erp_id",
            "in": "path",
            "required": true,
            "description": "The ERP ID to set",
            "schema": {
              "type": "integer",
              "example": 10001
            }
          }
        ],
        "responses": {
          "200": {
            "description": "ERP ID updated successfully",
            "content": {
              "application/json": {
                "example": {
                  "success": true,
                  "message": "ERP ID updated successfully",
                  "data": {
                    "odoo_id": 68,
                    "erp_id": 10001,
                    "model": "res.country"
                  }
                }
              }
            }
          },
          "400": {
            "description": "Bad Request - Invalid entity type",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error_code": "INVALID_ENTITY",
                  "message": "Invalid entity type: invalid_entity"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized - Invalid, missing, or expired API key",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error_code": "INVALID_API_KEY",
                  "message": "Invalid or missing API key"
                }
              }
            }
          },
          "404": {
            "description": "Not Found - The record with this Odoo ID does not exist",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error_code": "RECORD_NOT_FOUND",
                  "message": "Record not found: 68"
                }
              }
            }
          },
          "409": {
            "description": "Conflict - The ERP ID already exists for another record",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error_code": "DUPLICATE_ERP_ID",
                  "message": "ERP ID already exists"
                }
              }
            }
          },
          "500": {
            "description": "Internal Server Error - Unexpected error occurred",
            "content": {
              "application/json": {
                "example": {
                  "success": false,
                  "error_code": "INTERNAL_SERVER_ERROR",
                  "message": "An internal server error occurred"
                }
              }
            }
          }
        }
      }
    }
  }
}
